{
  "version": 3,
  "sources": ["../../gun/sea.js"],
  "sourcesContent": [";(function(){\r\n\r\n  /* UNBUILD */\r\n  function USE(arg, req){\r\n    return req? require(arg) : arg.slice? USE[R(arg)] : function(mod, path){\r\n      arg(mod = {exports: {}});\r\n      USE[R(path)] = mod.exports;\r\n    }\r\n    function R(p){\r\n      return p.split('/').slice(-1).toString().replace('.js','');\r\n    }\r\n  }\r\n  if(typeof module !== \"undefined\"){ var MODULE = module }\r\n  /* UNBUILD */\r\n\r\n  ;USE(function(module){\r\n    // Security, Encryption, and Authorization: SEA.js\r\n    // MANDATORY READING: https://gun.eco/explainers/data/security.html\r\n    // IT IS IMPLEMENTED IN A POLYFILL/SHIM APPROACH.\r\n    // THIS IS AN EARLY ALPHA!\r\n\r\n    if(typeof self !== \"undefined\"){ module.window = self } // should be safe for at least browser/worker/nodejs, need to check other envs like RN etc.\r\n    if(typeof window !== \"undefined\"){ module.window = window }\r\n\r\n    var tmp = module.window || module, u;\r\n    var SEA = tmp.SEA || {};\r\n\r\n    if(SEA.window = module.window){ SEA.window.SEA = SEA }\r\n\r\n    try{ if(u+'' !== typeof MODULE){ MODULE.exports = SEA } }catch(e){}\r\n    module.exports = SEA;\r\n  })(USE, './root');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    try{ if(SEA.window){\r\n      if(location.protocol.indexOf('s') < 0\r\n      && location.host.indexOf('localhost') < 0\r\n      && ! /^127\\.\\d+\\.\\d+\\.\\d+$/.test(location.hostname)\r\n      && location.protocol.indexOf('file:') < 0){\r\n        console.warn('HTTPS needed for WebCrypto in SEA, redirecting...');\r\n        location.protocol = 'https:'; // WebCrypto does NOT work without HTTPS!\r\n      }\r\n    } }catch(e){}\r\n  })(USE, './https');\r\n\r\n  ;USE(function(module){\r\n    var u;\r\n    if(u+''== typeof btoa){\r\n      if(u+'' == typeof Buffer){\r\n        try{ global.Buffer = USE(\"buffer\", 1).Buffer }catch(e){ console.log(\"Please `npm install buffer` or add it to your package.json !\") }\r\n      }\r\n      global.btoa = function(data){ return Buffer.from(data, \"binary\").toString(\"base64\") };\r\n      global.atob = function(data){ return Buffer.from(data, \"base64\").toString(\"binary\") };\r\n    }\r\n  })(USE, './base64');\r\n\r\n  ;USE(function(module){\r\n    USE('./base64');\r\n    // This is Array extended to have .toString(['utf8'|'hex'|'base64'])\r\n    function SeaArray() {}\r\n    Object.assign(SeaArray, { from: Array.from })\r\n    SeaArray.prototype = Object.create(Array.prototype)\r\n    SeaArray.prototype.toString = function(enc, start, end) { enc = enc || 'utf8'; start = start || 0;\r\n      const length = this.length\r\n      if (enc === 'hex') {\r\n        const buf = new Uint8Array(this)\r\n        return [ ...Array(((end && (end + 1)) || length) - start).keys()]\r\n        .map((i) => buf[ i + start ].toString(16).padStart(2, '0')).join('')\r\n      }\r\n      if (enc === 'utf8') {\r\n        return Array.from(\r\n          { length: (end || length) - start },\r\n          (_, i) => String.fromCharCode(this[ i + start])\r\n        ).join('')\r\n      }\r\n      if (enc === 'base64') {\r\n        return btoa(this)\r\n      }\r\n    }\r\n    module.exports = SeaArray;\r\n  })(USE, './array');\r\n\r\n  ;USE(function(module){\r\n    USE('./base64');\r\n    // This is Buffer implementation used in SEA. Functionality is mostly\r\n    // compatible with NodeJS 'safe-buffer' and is used for encoding conversions\r\n    // between binary and 'hex' | 'utf8' | 'base64'\r\n    // See documentation and validation for safe implementation in:\r\n    // https://github.com/feross/safe-buffer#update\r\n    var SeaArray = USE('./array');\r\n    function SafeBuffer(...props) {\r\n      console.warn('new SafeBuffer() is depreciated, please use SafeBuffer.from()')\r\n      return SafeBuffer.from(...props)\r\n    }\r\n    SafeBuffer.prototype = Object.create(Array.prototype)\r\n    Object.assign(SafeBuffer, {\r\n      // (data, enc) where typeof data === 'string' then enc === 'utf8'|'hex'|'base64'\r\n      from() {\r\n        if (!Object.keys(arguments).length || arguments[0]==null) {\r\n          throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\r\n        }\r\n        const input = arguments[0]\r\n        let buf\r\n        if (typeof input === 'string') {\r\n          const enc = arguments[1] || 'utf8'\r\n          if (enc === 'hex') {\r\n            const bytes = input.match(/([\\da-fA-F]{2})/g)\r\n            .map((byte) => parseInt(byte, 16))\r\n            if (!bytes || !bytes.length) {\r\n              throw new TypeError('Invalid first argument for type \\'hex\\'.')\r\n            }\r\n            buf = SeaArray.from(bytes)\r\n          } else if (enc === 'utf8' || 'binary' === enc) { // EDIT BY MARK: I think this is safe, tested it against a couple \"binary\" strings. This lets SafeBuffer match NodeJS Buffer behavior more where it safely btoas regular strings.\r\n            const length = input.length\r\n            const words = new Uint16Array(length)\r\n            Array.from({ length: length }, (_, i) => words[i] = input.charCodeAt(i))\r\n            buf = SeaArray.from(words)\r\n          } else if (enc === 'base64') {\r\n            const dec = atob(input)\r\n            const length = dec.length\r\n            const bytes = new Uint8Array(length)\r\n            Array.from({ length: length }, (_, i) => bytes[i] = dec.charCodeAt(i))\r\n            buf = SeaArray.from(bytes)\r\n          } else if (enc === 'binary') { // deprecated by above comment\r\n            buf = SeaArray.from(input) // some btoas were mishandled.\r\n          } else {\r\n            console.info('SafeBuffer.from unknown encoding: '+enc)\r\n          }\r\n          return buf\r\n        }\r\n        const byteLength = input.byteLength // what is going on here? FOR MARTTI\r\n        const length = input.byteLength ? input.byteLength : input.length\r\n        if (length) {\r\n          let buf\r\n          if (input instanceof ArrayBuffer) {\r\n            buf = new Uint8Array(input)\r\n          }\r\n          return SeaArray.from(buf || input)\r\n        }\r\n      },\r\n      // This is 'safe-buffer.alloc' sans encoding support\r\n      alloc(length, fill = 0 /*, enc*/ ) {\r\n        return SeaArray.from(new Uint8Array(Array.from({ length: length }, () => fill)))\r\n      },\r\n      // This is normal UNSAFE 'buffer.alloc' or 'new Buffer(length)' - don't use!\r\n      allocUnsafe(length) {\r\n        return SeaArray.from(new Uint8Array(Array.from({ length : length })))\r\n      },\r\n      // This puts together array of array like members\r\n      concat(arr) { // octet array\r\n        if (!Array.isArray(arr)) {\r\n          throw new TypeError('First argument must be Array containing ArrayBuffer or Uint8Array instances.')\r\n        }\r\n        return SeaArray.from(arr.reduce((ret, item) => ret.concat(Array.from(item)), []))\r\n      }\r\n    })\r\n    SafeBuffer.prototype.from = SafeBuffer.from\r\n    SafeBuffer.prototype.toString = SeaArray.prototype.toString\r\n\r\n    module.exports = SafeBuffer;\r\n  })(USE, './buffer');\r\n\r\n  ;USE(function(module){\r\n    const SEA = USE('./root')\r\n    const api = {Buffer: USE('./buffer')}\r\n    var o = {}, u;\r\n\r\n    // ideally we can move away from JSON entirely? unlikely due to compatibility issues... oh well.\r\n    JSON.parseAsync = JSON.parseAsync || function(t,cb,r){ var u; try{ cb(u, JSON.parse(t,r)) }catch(e){ cb(e) } }\r\n    JSON.stringifyAsync = JSON.stringifyAsync || function(v,cb,r,s){ var u; try{ cb(u, JSON.stringify(v,r,s)) }catch(e){ cb(e) } }\r\n\r\n    api.parse = function(t,r){ return new Promise(function(res, rej){\r\n      JSON.parseAsync(t,function(err, raw){ err? rej(err) : res(raw) },r);\r\n    })}\r\n    api.stringify = function(v,r,s){ return new Promise(function(res, rej){\r\n      JSON.stringifyAsync(v,function(err, raw){ err? rej(err) : res(raw) },r,s);\r\n    })}\r\n\r\n    if(SEA.window){\r\n      api.crypto = SEA.window.crypto || SEA.window.msCrypto\r\n      api.subtle = (api.crypto||o).subtle || (api.crypto||o).webkitSubtle;\r\n      api.TextEncoder = SEA.window.TextEncoder;\r\n      api.TextDecoder = SEA.window.TextDecoder;\r\n      api.random = (len) => api.Buffer.from(api.crypto.getRandomValues(new Uint8Array(api.Buffer.alloc(len))));\r\n    }\r\n    if(!api.TextDecoder)\r\n    {\r\n      const { TextEncoder, TextDecoder } = USE((u+'' == typeof MODULE?'.':'')+'./lib/text-encoding', 1);\r\n      api.TextDecoder = TextDecoder;\r\n      api.TextEncoder = TextEncoder;\r\n    }\r\n    if(!api.crypto)\r\n    {\r\n      try\r\n      {\r\n      var crypto = USE('crypto', 1);\r\n      Object.assign(api, {\r\n        crypto,\r\n        random: (len) => api.Buffer.from(crypto.randomBytes(len))\r\n      });      \r\n      const { Crypto: WebCrypto } = USE('@peculiar/webcrypto', 1);\r\n      api.ossl = api.subtle = new WebCrypto({directory: 'ossl'}).subtle // ECDH\r\n    }\r\n    catch(e){\r\n      console.log(\"Please `npm install @peculiar/webcrypto` or add it to your package.json !\");\r\n    }}\r\n\r\n    module.exports = api\r\n  })(USE, './shim');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var s = {};\r\n    s.pbkdf2 = {hash: {name : 'SHA-256'}, iter: 100000, ks: 64};\r\n    s.ecdsa = {\r\n      pair: {name: 'ECDSA', namedCurve: 'P-256'},\r\n      sign: {name: 'ECDSA', hash: {name: 'SHA-256'}}\r\n    };\r\n    s.ecdh = {name: 'ECDH', namedCurve: 'P-256'};\r\n\r\n    // This creates Web Cryptography API compliant JWK for sign/verify purposes\r\n    s.jwk = function(pub, d){  // d === priv\r\n      pub = pub.split('.');\r\n      var x = pub[0], y = pub[1];\r\n      var jwk = {kty: \"EC\", crv: \"P-256\", x: x, y: y, ext: true};\r\n      jwk.key_ops = d ? ['sign'] : ['verify'];\r\n      if(d){ jwk.d = d }\r\n      return jwk;\r\n    };\r\n    \r\n    s.keyToJwk = function(keyBytes) {\r\n      const keyB64 = keyBytes.toString('base64');\r\n      const k = keyB64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/\\=/g, '');\r\n      return { kty: 'oct', k: k, ext: false, alg: 'A256GCM' };\r\n    }\r\n\r\n    s.recall = {\r\n      validity: 12 * 60 * 60, // internally in seconds : 12 hours\r\n      hook: function(props){ return props } // { iat, exp, alias, remember } // or return new Promise((resolve, reject) => resolve(props)\r\n    };\r\n\r\n    s.check = function(t){ return (typeof t == 'string') && ('SEA{' === t.slice(0,4)) }\r\n    s.parse = async function p(t){ try {\r\n      var yes = (typeof t == 'string');\r\n      if(yes && 'SEA{' === t.slice(0,4)){ t = t.slice(3) }\r\n      return yes ? await shim.parse(t) : t;\r\n      } catch (e) {}\r\n      return t;\r\n    }\r\n\r\n    SEA.opt = s;\r\n    module.exports = s\r\n  })(USE, './settings');\r\n\r\n  ;USE(function(module){\r\n    var shim = USE('./shim');\r\n    module.exports = async function(d, o){\r\n      var t = (typeof d == 'string')? d : await shim.stringify(d);\r\n      var hash = await shim.subtle.digest({name: o||'SHA-256'}, new shim.TextEncoder().encode(t));\r\n      return shim.Buffer.from(hash);\r\n    }\r\n  })(USE, './sha256');\r\n\r\n  ;USE(function(module){\r\n    // This internal func returns SHA-1 hashed data for KeyID generation\r\n    const __shim = USE('./shim')\r\n    const subtle = __shim.subtle\r\n    const ossl = __shim.ossl ? __shim.ossl : subtle\r\n    const sha1hash = (b) => ossl.digest({name: 'SHA-1'}, new ArrayBuffer(b))\r\n    module.exports = sha1hash\r\n  })(USE, './sha1');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n    var sha = USE('./sha256');\r\n    var u;\r\n\r\n    SEA.work = SEA.work || (async (data, pair, cb, opt) => { try { // used to be named `proof`\r\n      var salt = (pair||{}).epub || pair; // epub not recommended, salt should be random!\r\n      opt = opt || {};\r\n      if(salt instanceof Function){\r\n        cb = salt;\r\n        salt = u;\r\n      }\r\n      data = (typeof data == 'string')? data : await shim.stringify(data);\r\n      if('sha' === (opt.name||'').toLowerCase().slice(0,3)){\r\n        var rsha = shim.Buffer.from(await sha(data, opt.name), 'binary').toString(opt.encode || 'base64')\r\n        if(cb){ try{ cb(rsha) }catch(e){console.log(e)} }\r\n        return rsha;\r\n      }\r\n      salt = salt || shim.random(9);\r\n      var key = await (shim.ossl || shim.subtle).importKey('raw', new shim.TextEncoder().encode(data), {name: opt.name || 'PBKDF2'}, false, ['deriveBits']);\r\n      var work = await (shim.ossl || shim.subtle).deriveBits({\r\n        name: opt.name || 'PBKDF2',\r\n        iterations: opt.iterations || S.pbkdf2.iter,\r\n        salt: new shim.TextEncoder().encode(opt.salt || salt),\r\n        hash: opt.hash || S.pbkdf2.hash,\r\n      }, key, opt.length || (S.pbkdf2.ks * 8))\r\n      data = shim.random(data.length)  // Erase data in case of passphrase\r\n      var r = shim.Buffer.from(work, 'binary').toString(opt.encode || 'base64')\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) { \r\n      console.log(e);\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    module.exports = SEA.work;\r\n  })(USE, './work');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n\r\n    SEA.name = SEA.name || (async (cb, opt) => { try {\r\n      if(cb){ try{ cb() }catch(e){console.log(e)} }\r\n      return;\r\n    } catch(e) {\r\n      console.log(e);\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    //SEA.pair = async (data, proof, cb) => { try {\r\n    SEA.pair = SEA.pair || (async (cb, opt) => { try {\r\n\r\n      var ecdhSubtle = shim.ossl || shim.subtle;\r\n      // First: ECDSA keys for signing/verifying...\r\n      var sa = await shim.subtle.generateKey({name: 'ECDSA', namedCurve: 'P-256'}, true, [ 'sign', 'verify' ])\r\n      .then(async (keys) => {\r\n        // privateKey scope doesn't leak out from here!\r\n        //const { d: priv } = await shim.subtle.exportKey('jwk', keys.privateKey)\r\n        var key = {};\r\n        key.priv = (await shim.subtle.exportKey('jwk', keys.privateKey)).d;\r\n        var pub = await shim.subtle.exportKey('jwk', keys.publicKey);\r\n        //const pub = Buff.from([ x, y ].join(':')).toString('base64') // old\r\n        key.pub = pub.x+'.'+pub.y; // new\r\n        // x and y are already base64\r\n        // pub is UTF8 but filename/URL safe (https://www.ietf.org/rfc/rfc3986.txt)\r\n        // but split on a non-base64 letter.\r\n        return key;\r\n      })\r\n      \r\n      // To include PGPv4 kind of keyId:\r\n      // const pubId = await SEA.keyid(keys.pub)\r\n      // Next: ECDH keys for encryption/decryption...\r\n\r\n      try{\r\n      var dh = await ecdhSubtle.generateKey({name: 'ECDH', namedCurve: 'P-256'}, true, ['deriveKey'])\r\n      .then(async (keys) => {\r\n        // privateKey scope doesn't leak out from here!\r\n        var key = {};\r\n        key.epriv = (await ecdhSubtle.exportKey('jwk', keys.privateKey)).d;\r\n        var pub = await ecdhSubtle.exportKey('jwk', keys.publicKey);\r\n        //const epub = Buff.from([ ex, ey ].join(':')).toString('base64') // old\r\n        key.epub = pub.x+'.'+pub.y; // new\r\n        // ex and ey are already base64\r\n        // epub is UTF8 but filename/URL safe (https://www.ietf.org/rfc/rfc3986.txt)\r\n        // but split on a non-base64 letter.\r\n        return key;\r\n      })\r\n      }catch(e){\r\n        if(SEA.window){ throw e }\r\n        if(e == 'Error: ECDH is not a supported algorithm'){ console.log('Ignoring ECDH...') }\r\n        else { throw e }\r\n      } dh = dh || {};\r\n\r\n      var r = { pub: sa.pub, priv: sa.priv, /* pubId, */ epub: dh.epub, epriv: dh.epriv }\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) {\r\n      console.log(e);\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    module.exports = SEA.pair;\r\n  })(USE, './pair');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n    var sha = USE('./sha256');\r\n    var u;\r\n\r\n    SEA.sign = SEA.sign || (async (data, pair, cb, opt) => { try {\r\n      opt = opt || {};\r\n      if(!(pair||opt).priv){\r\n        if(!SEA.I){ throw 'No signing key.' }\r\n        pair = await SEA.I(null, {what: data, how: 'sign', why: opt.why});\r\n      }\r\n      if(u === data){ throw '`undefined` not allowed.' }\r\n      var json = await S.parse(data);\r\n      var check = opt.check = opt.check || json;\r\n      if(SEA.verify && (SEA.opt.check(check) || (check && check.s && check.m))\r\n      && u !== await SEA.verify(check, pair)){ // don't sign if we already signed it.\r\n        var r = await S.parse(check);\r\n        if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\r\n        if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n        return r;\r\n      }\r\n      var pub = pair.pub;\r\n      var priv = pair.priv;\r\n      var jwk = S.jwk(pub, priv);\r\n      var hash = await sha(json);\r\n      var sig = await (shim.ossl || shim.subtle).importKey('jwk', jwk, {name: 'ECDSA', namedCurve: 'P-256'}, false, ['sign'])\r\n      .then((key) => (shim.ossl || shim.subtle).sign({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, new Uint8Array(hash))) // privateKey scope doesn't leak out from here!\r\n      var r = {m: json, s: shim.Buffer.from(sig, 'binary').toString(opt.encode || 'base64')}\r\n      if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\r\n\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) {\r\n      console.log(e);\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    module.exports = SEA.sign;\r\n  })(USE, './sign');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n    var sha = USE('./sha256');\r\n    var u;\r\n\r\n    SEA.verify = SEA.verify || (async (data, pair, cb, opt) => { try {\r\n      var json = await S.parse(data);\r\n      if(false === pair){ // don't verify!\r\n        var raw = await S.parse(json.m);\r\n        if(cb){ try{ cb(raw) }catch(e){console.log(e)} }\r\n        return raw;\r\n      }\r\n      opt = opt || {};\r\n      // SEA.I // verify is free! Requires no user permission.\r\n      var pub = pair.pub || pair;\r\n      var key = SEA.opt.slow_leak? await SEA.opt.slow_leak(pub) : await (shim.ossl || shim.subtle).importKey('jwk', S.jwk(pub), {name: 'ECDSA', namedCurve: 'P-256'}, false, ['verify']);\r\n      var hash = await sha(json.m);\r\n      var buf, sig, check, tmp; try{\r\n        buf = shim.Buffer.from(json.s, opt.encode || 'base64'); // NEW DEFAULT!\r\n        sig = new Uint8Array(buf);\r\n        check = await (shim.ossl || shim.subtle).verify({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, sig, new Uint8Array(hash));\r\n        if(!check){ throw \"Signature did not match.\" }\r\n      }catch(e){\r\n        if(SEA.opt.fallback){\r\n          return await SEA.opt.fall_verify(data, pair, cb, opt);\r\n        }\r\n      }\r\n      var r = check? await S.parse(json.m) : u;\r\n\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) {\r\n      console.log(e); // mismatched owner FOR MARTTI\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    module.exports = SEA.verify;\r\n    // legacy & ossl memory leak mitigation:\r\n\r\n    var knownKeys = {};\r\n    var keyForPair = SEA.opt.slow_leak = pair => {\r\n      if (knownKeys[pair]) return knownKeys[pair];\r\n      var jwk = S.jwk(pair);\r\n      knownKeys[pair] = (shim.ossl || shim.subtle).importKey(\"jwk\", jwk, {name: 'ECDSA', namedCurve: 'P-256'}, false, [\"verify\"]);\r\n      return knownKeys[pair];\r\n    };\r\n\r\n    var O = SEA.opt;\r\n    SEA.opt.fall_verify = async function(data, pair, cb, opt, f){\r\n      if(f === SEA.opt.fallback){ throw \"Signature did not match\" } f = f || 1;\r\n      var tmp = data||'';\r\n      data = SEA.opt.unpack(data) || data;\r\n      var json = await S.parse(data), pub = pair.pub || pair, key = await SEA.opt.slow_leak(pub);\r\n      var hash = (f <= SEA.opt.fallback)? shim.Buffer.from(await shim.subtle.digest({name: 'SHA-256'}, new shim.TextEncoder().encode(await S.parse(json.m)))) : await sha(json.m); // this line is old bad buggy code but necessary for old compatibility.\r\n      var buf; var sig; var check; try{\r\n        buf = shim.Buffer.from(json.s, opt.encode || 'base64') // NEW DEFAULT!\r\n        sig = new Uint8Array(buf)\r\n        check = await (shim.ossl || shim.subtle).verify({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, sig, new Uint8Array(hash))\r\n        if(!check){ throw \"Signature did not match.\" }\r\n      }catch(e){ try{\r\n        buf = shim.Buffer.from(json.s, 'utf8') // AUTO BACKWARD OLD UTF8 DATA!\r\n        sig = new Uint8Array(buf)\r\n        check = await (shim.ossl || shim.subtle).verify({name: 'ECDSA', hash: {name: 'SHA-256'}}, key, sig, new Uint8Array(hash))\r\n        }catch(e){\r\n        if(!check){ throw \"Signature did not match.\" }\r\n        }\r\n      }\r\n      var r = check? await S.parse(json.m) : u;\r\n      O.fall_soul = tmp['#']; O.fall_key = tmp['.']; O.fall_val = data; O.fall_state = tmp['>'];\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    }\r\n    SEA.opt.fallback = 2;\r\n\r\n  })(USE, './verify');\r\n\r\n  ;USE(function(module){\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n    var sha256hash = USE('./sha256');\r\n\r\n    const importGen = async (key, salt, opt) => {\r\n      //const combo = shim.Buffer.concat([shim.Buffer.from(key, 'utf8'), salt || shim.random(8)]).toString('utf8') // old\r\n      opt = opt || {};\r\n      const combo = key + (salt || shim.random(8)).toString('utf8'); // new\r\n      const hash = shim.Buffer.from(await sha256hash(combo), 'binary')\r\n      \r\n      const jwkKey = S.keyToJwk(hash)      \r\n      return await shim.subtle.importKey('jwk', jwkKey, {name:'AES-GCM'}, false, ['encrypt', 'decrypt'])\r\n    }\r\n    module.exports = importGen;\r\n  })(USE, './aeskey');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n    var aeskey = USE('./aeskey');\r\n    var u;\r\n\r\n    SEA.encrypt = SEA.encrypt || (async (data, pair, cb, opt) => { try {\r\n      opt = opt || {};\r\n      var key = (pair||opt).epriv || pair;\r\n      if(u === data){ throw '`undefined` not allowed.' }\r\n      if(!key){\r\n        if(!SEA.I){ throw 'No encryption key.' }\r\n        pair = await SEA.I(null, {what: data, how: 'encrypt', why: opt.why});\r\n        key = pair.epriv || pair;\r\n      }\r\n      var msg = (typeof data == 'string')? data : await shim.stringify(data);\r\n      var rand = {s: shim.random(9), iv: shim.random(15)}; // consider making this 9 and 15 or 18 or 12 to reduce == padding.\r\n      var ct = await aeskey(key, rand.s, opt).then((aes) => (/*shim.ossl ||*/ shim.subtle).encrypt({ // Keeping the AES key scope as private as possible...\r\n        name: opt.name || 'AES-GCM', iv: new Uint8Array(rand.iv)\r\n      }, aes, new shim.TextEncoder().encode(msg)));\r\n      var r = {\r\n        ct: shim.Buffer.from(ct, 'binary').toString(opt.encode || 'base64'),\r\n        iv: rand.iv.toString(opt.encode || 'base64'),\r\n        s: rand.s.toString(opt.encode || 'base64')\r\n      }\r\n      if(!opt.raw){ r = 'SEA' + await shim.stringify(r) }\r\n\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) { \r\n      console.log(e);\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    module.exports = SEA.encrypt;\r\n  })(USE, './encrypt');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n    var aeskey = USE('./aeskey');\r\n\r\n    SEA.decrypt = SEA.decrypt || (async (data, pair, cb, opt) => { try {\r\n      opt = opt || {};\r\n      var key = (pair||opt).epriv || pair;\r\n      if(!key){\r\n        if(!SEA.I){ throw 'No decryption key.' }\r\n        pair = await SEA.I(null, {what: data, how: 'decrypt', why: opt.why});\r\n        key = pair.epriv || pair;\r\n      }\r\n      var json = await S.parse(data);\r\n      var buf, bufiv, bufct; try{\r\n        buf = shim.Buffer.from(json.s, opt.encode || 'base64');\r\n        bufiv = shim.Buffer.from(json.iv, opt.encode || 'base64');\r\n        bufct = shim.Buffer.from(json.ct, opt.encode || 'base64');\r\n        var ct = await aeskey(key, buf, opt).then((aes) => (/*shim.ossl ||*/ shim.subtle).decrypt({  // Keeping aesKey scope as private as possible...\r\n          name: opt.name || 'AES-GCM', iv: new Uint8Array(bufiv), tagLength: 128\r\n        }, aes, new Uint8Array(bufct)));\r\n      }catch(e){\r\n        if('utf8' === opt.encode){ throw \"Could not decrypt\" }\r\n        if(SEA.opt.fallback){\r\n          opt.encode = 'utf8';\r\n          return await SEA.decrypt(data, pair, cb, opt);\r\n        }\r\n      }\r\n      var r = await S.parse(new shim.TextDecoder('utf8').decode(ct));\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) { \r\n      console.log(e);\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    module.exports = SEA.decrypt;\r\n  })(USE, './decrypt');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    var shim = USE('./shim');\r\n    var S = USE('./settings');\r\n    // Derive shared secret from other's pub and my epub/epriv \r\n    SEA.secret = SEA.secret || (async (key, pair, cb, opt) => { try {\r\n      opt = opt || {};\r\n      if(!pair || !pair.epriv || !pair.epub){\r\n        if(!SEA.I){ throw 'No secret mix.' }\r\n        pair = await SEA.I(null, {what: key, how: 'secret', why: opt.why});\r\n      }\r\n      var pub = key.epub || key;\r\n      var epub = pair.epub;\r\n      var epriv = pair.epriv;\r\n      var ecdhSubtle = shim.ossl || shim.subtle;\r\n      var pubKeyData = keysToEcdhJwk(pub);\r\n      var props = Object.assign({ public: await ecdhSubtle.importKey(...pubKeyData, true, []) },{name: 'ECDH', namedCurve: 'P-256'}); // Thanks to @sirpy !\r\n      var privKeyData = keysToEcdhJwk(epub, epriv);\r\n      var derived = await ecdhSubtle.importKey(...privKeyData, false, ['deriveBits']).then(async (privKey) => {\r\n        // privateKey scope doesn't leak out from here!\r\n        var derivedBits = await ecdhSubtle.deriveBits(props, privKey, 256);\r\n        var rawBits = new Uint8Array(derivedBits);\r\n        var derivedKey = await ecdhSubtle.importKey('raw', rawBits,{ name: 'AES-GCM', length: 256 }, true, [ 'encrypt', 'decrypt' ]);\r\n        return ecdhSubtle.exportKey('jwk', derivedKey).then(({ k }) => k);\r\n      })\r\n      var r = derived;\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) {\r\n      console.log(e);\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    // can this be replaced with settings.jwk?\r\n    var keysToEcdhJwk = (pub, d) => { // d === priv\r\n      //var [ x, y ] = shim.Buffer.from(pub, 'base64').toString('utf8').split(':') // old\r\n      var [ x, y ] = pub.split('.') // new\r\n      var jwk = d ? { d: d } : {}\r\n      return [  // Use with spread returned value...\r\n        'jwk',\r\n        Object.assign(\r\n          jwk,\r\n          { x: x, y: y, kty: 'EC', crv: 'P-256', ext: true }\r\n        ), // ??? refactor\r\n        {name: 'ECDH', namedCurve: 'P-256'}\r\n      ]\r\n    }\r\n\r\n    module.exports = SEA.secret;\r\n  })(USE, './secret');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./root');\r\n    // This is to certify that a group of \"certificants\" can \"put\" anything at a group of matched \"paths\" to the certificate authority's graph\r\n    SEA.certify = SEA.certify || (async (certificants, policy = {}, authority, cb, opt = {}) => { try {\r\n      /*\r\n      The Certify Protocol was made out of love by a Vietnamese code enthusiast. Vietnamese people around the world deserve respect!\r\n      IMPORTANT: A Certificate is like a Signature. No one knows who (authority) created/signed a cert until you put it into their graph.\r\n      \"certificants\": '*' or a String (Bob.pub) || an Object that contains \"pub\" as a key || an array of [object || string]. These people will have the rights.\r\n      \"policy\": A string ('inbox'), or a RAD/LEX object {'*': 'inbox'}, or an Array of RAD/LEX objects or strings. RAD/LEX object can contain key \"?\" with indexOf(\"*\") > -1 to force key equals certificant pub. This rule is used to check against soul+'/'+key using Gun.text.match or String.match.\r\n      \"authority\": Key pair or priv of the certificate authority.\r\n      \"cb\": A callback function after all things are done.\r\n      \"opt\": If opt.expiry (a timestamp) is set, SEA won't sync data after opt.expiry. If opt.block is set, SEA will look for block before syncing.\r\n      */\r\n      console.log('SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version.')\r\n\r\n      certificants = (() => {\r\n        var data = []\r\n        if (certificants) {\r\n          if ((typeof certificants === 'string' || Array.isArray(certificants)) && certificants.indexOf('*') > -1) return '*'\r\n          if (typeof certificants === 'string') return certificants\r\n          if (Array.isArray(certificants)) {\r\n            if (certificants.length === 1 && certificants[0]) return typeof certificants[0] === 'object' && certificants[0].pub ? certificants[0].pub : typeof certificants[0] === 'string' ? certificants[0] : null\r\n            certificants.map(certificant => {\r\n              if (typeof certificant ==='string') data.push(certificant)\r\n              else if (typeof certificant === 'object' && certificant.pub) data.push(certificant.pub)\r\n            })\r\n          }\r\n\r\n          if (typeof certificants === 'object' && certificants.pub) return certificants.pub\r\n          return data.length > 0 ? data : null\r\n        }\r\n        return\r\n      })()\r\n\r\n      if (!certificants) return console.log(\"No certificant found.\")\r\n\r\n      const expiry = opt.expiry && (typeof opt.expiry === 'number' || typeof opt.expiry === 'string') ? parseFloat(opt.expiry) : null\r\n      const readPolicy = (policy || {}).read ? policy.read : null\r\n      const writePolicy = (policy || {}).write ? policy.write : typeof policy === 'string' || Array.isArray(policy) || policy[\"+\"] || policy[\"#\"] || policy[\".\"] || policy[\"=\"] || policy[\"*\"] || policy[\">\"] || policy[\"<\"] ? policy : null\r\n      // The \"blacklist\" feature is now renamed to \"block\". Why ? BECAUSE BLACK LIVES MATTER!\r\n      // We can now use 3 keys: block, blacklist, ban\r\n      const block = (opt || {}).block || (opt || {}).blacklist || (opt || {}).ban || {}\r\n      const readBlock = block.read && (typeof block.read === 'string' || (block.read || {})['#']) ? block.read : null\r\n      const writeBlock = typeof block === 'string' ? block : block.write && (typeof block.write === 'string' || block.write['#']) ? block.write : null\r\n\r\n      if (!readPolicy && !writePolicy) return console.log(\"No policy found.\")\r\n\r\n      // reserved keys: c, e, r, w, rb, wb\r\n      const data = JSON.stringify({\r\n        c: certificants,\r\n        ...(expiry ? {e: expiry} : {}), // inject expiry if possible\r\n        ...(readPolicy ? {r: readPolicy }  : {}), // \"r\" stands for read, which means read permission.\r\n        ...(writePolicy ? {w: writePolicy} : {}), // \"w\" stands for write, which means write permission.\r\n        ...(readBlock ? {rb: readBlock} : {}), // inject READ block if possible\r\n        ...(writeBlock ? {wb: writeBlock} : {}), // inject WRITE block if possible\r\n      })\r\n\r\n      const certificate = await SEA.sign(data, authority, null, {raw:1})\r\n\r\n      var r = certificate\r\n      if(!opt.raw){ r = 'SEA'+JSON.stringify(r) }\r\n      if(cb){ try{ cb(r) }catch(e){console.log(e)} }\r\n      return r;\r\n    } catch(e) {\r\n      SEA.err = e;\r\n      if(SEA.throw){ throw e }\r\n      if(cb){ cb() }\r\n      return;\r\n    }});\r\n\r\n    module.exports = SEA.certify;\r\n  })(USE, './certify');\r\n\r\n  ;USE(function(module){\r\n    var shim = USE('./shim');\r\n    // Practical examples about usage found in tests.\r\n    var SEA = USE('./root');\r\n    SEA.work = USE('./work');\r\n    SEA.sign = USE('./sign');\r\n    SEA.verify = USE('./verify');\r\n    SEA.encrypt = USE('./encrypt');\r\n    SEA.decrypt = USE('./decrypt');\r\n    SEA.certify = USE('./certify');\r\n    //SEA.opt.aeskey = USE('./aeskey'); // not official! // this causes problems in latest WebCrypto.\r\n\r\n    SEA.random = SEA.random || shim.random;\r\n\r\n    // This is Buffer used in SEA and usable from Gun/SEA application also.\r\n    // For documentation see https://nodejs.org/api/buffer.html\r\n    SEA.Buffer = SEA.Buffer || USE('./buffer');\r\n\r\n    // These SEA functions support now ony Promises or\r\n    // async/await (compatible) code, use those like Promises.\r\n    //\r\n    // Creates a wrapper library around Web Crypto API\r\n    // for various AES, ECDSA, PBKDF2 functions we called above.\r\n    // Calculate public key KeyID aka PGPv4 (result: 8 bytes as hex string)\r\n    SEA.keyid = SEA.keyid || (async (pub) => {\r\n      try {\r\n        // base64('base64(x):base64(y)') => shim.Buffer(xy)\r\n        const pb = shim.Buffer.concat(\r\n          pub.replace(/-/g, '+').replace(/_/g, '/').split('.')\r\n          .map((t) => shim.Buffer.from(t, 'base64'))\r\n        )\r\n        // id is PGPv4 compliant raw key\r\n        const id = shim.Buffer.concat([\r\n          shim.Buffer.from([0x99, pb.length / 0x100, pb.length % 0x100]), pb\r\n        ])\r\n        const sha1 = await sha1hash(id)\r\n        const hash = shim.Buffer.from(sha1, 'binary')\r\n        return hash.toString('hex', hash.length - 8)  // 16-bit ID as hex\r\n      } catch (e) {\r\n        console.log(e)\r\n        throw e\r\n      }\r\n    });\r\n    // all done!\r\n    // Obviously it is missing MANY necessary features. This is only an alpha release.\r\n    // Please experiment with it, audit what I've done so far, and complain about what needs to be added.\r\n    // SEA should be a full suite that is easy and seamless to use.\r\n    // Again, scroll naer the top, where I provide an EXAMPLE of how to create a user and sign in.\r\n    // Once logged in, the rest of the code you just read handled automatically signing/validating data.\r\n    // But all other behavior needs to be equally easy, like opinionated ways of\r\n    // Adding friends (trusted public keys), sending private messages, etc.\r\n    // Cheers! Tell me what you think.\r\n    ((SEA.window||{}).GUN||{}).SEA = SEA;\r\n\r\n    module.exports = SEA\r\n    // -------------- END SEA MODULES --------------------\r\n    // -- BEGIN SEA+GUN MODULES: BUNDLED BY DEFAULT UNTIL OTHERS USE SEA ON OWN -------\r\n  })(USE, './sea');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./sea'), Gun, u;\r\n    if(SEA.window){\r\n      Gun = SEA.window.GUN || {chain:{}};\r\n    } else {\r\n      Gun = USE((u+'' == typeof MODULE?'.':'')+'./gun', 1);\r\n    }\r\n    SEA.GUN = Gun;\r\n\r\n    function User(root){ \r\n      this._ = {$: this};\r\n    }\r\n    User.prototype = (function(){ function F(){}; F.prototype = Gun.chain; return new F() }()) // Object.create polyfill\r\n    User.prototype.constructor = User;\r\n\r\n    // let's extend the gun chain with a `user` function.\r\n    // only one user can be logged in at a time, per gun instance.\r\n    Gun.chain.user = function(pub){\r\n      var gun = this, root = gun.back(-1), user;\r\n      if(pub){\r\n        pub = SEA.opt.pub((pub._||'')['#']) || pub;\r\n        return root.get('~'+pub);\r\n      }\r\n      if(user = root.back('user')){ return user }\r\n      var root = (root._), at = root, uuid = at.opt.uuid || lex;\r\n      (at = (user = at.user = gun.chain(new User))._).opt = {};\r\n      at.opt.uuid = function(cb){\r\n        var id = uuid(), pub = root.user;\r\n        if(!pub || !(pub = pub.is) || !(pub = pub.pub)){ return id }\r\n        id = '~' + pub + '/' + id;\r\n        if(cb && cb.call){ cb(null, id) }\r\n        return id;\r\n      }\r\n      return user;\r\n    }\r\n    function lex(){ return Gun.state().toString(36).replace('.','') }\r\n    Gun.User = User;\r\n    User.GUN = Gun;\r\n    User.SEA = Gun.SEA = SEA;\r\n    module.exports = User;\r\n  })(USE, './user');\r\n\r\n  ;USE(function(module){\r\n    var u, Gun = (''+u != typeof GUN)? (GUN||{chain:{}}) : USE((''+u === typeof MODULE?'.':'')+'./gun', 1);\r\n    Gun.chain.then = function(cb, opt){\r\n      var gun = this, p = (new Promise(function(res, rej){\r\n        gun.once(res, opt);\r\n      }));\r\n      return cb? p.then(cb) : p;\r\n    }\r\n  })(USE, './then');\r\n\r\n  ;USE(function(module){\r\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN, noop = function(){};\r\n\r\n    // Well first we have to actually create a user. That is what this function does.\r\n    User.prototype.create = function(...args){\r\n      var pair = typeof args[0] === 'object' && (args[0].pub || args[0].epub) ? args[0] : typeof args[1] === 'object' && (args[1].pub || args[1].epub) ? args[1] : null;\r\n      var alias = pair && (pair.pub || pair.epub) ? pair.pub : typeof args[0] === 'string' ? args[0] : null;\r\n      var pass = pair && (pair.pub || pair.epub) ? pair : alias && typeof args[1] === 'string' ? args[1] : null;\r\n      var cb = args.filter(arg => typeof arg === 'function')[0] || null; // cb now can stand anywhere, after alias/pass or pair\r\n      var opt = args && args.length > 1 && typeof args[args.length-1] === 'object' ? args[args.length-1] : {}; // opt is always the last parameter which typeof === 'object' and stands after cb\r\n      \r\n      var gun = this, cat = (gun._), root = gun.back(-1);\r\n      cb = cb || noop;\r\n      opt = opt || {};\r\n      if(false !== opt.check){\r\n        var err;\r\n        if(!alias){ err = \"No user.\" }\r\n        if((pass||'').length < 8){ err = \"Password too short!\" }\r\n        if(err){\r\n          cb({err: Gun.log(err)});\r\n          return gun;\r\n        }\r\n      }\r\n      if(cat.ing){\r\n        (cb || noop)({err: Gun.log(\"User is already being created or authenticated!\"), wait: true});\r\n        return gun;\r\n      }\r\n      cat.ing = true;\r\n      var act = {}, u;\r\n      act.a = function(pubs){\r\n        act.pubs = pubs;\r\n        if(pubs && !opt.already){\r\n          // If we can enforce that a user name is already taken, it might be nice to try, but this is not guaranteed.\r\n          var ack = {err: Gun.log('User already created!')};\r\n          cat.ing = false;\r\n          (cb || noop)(ack);\r\n          gun.leave();\r\n          return;\r\n        }\r\n        act.salt = String.random(64); // pseudo-randomly create a salt, then use PBKDF2 function to extend the password with it.\r\n        SEA.work(pass, act.salt, act.b); // this will take some short amount of time to produce a proof, which slows brute force attacks.\r\n      }\r\n      act.b = function(proof){\r\n        act.proof = proof;\r\n        pair ? act.c(pair) : SEA.pair(act.c) // generate a brand new key pair or use the existing.\r\n      }\r\n      act.c = function(pair){\r\n        var tmp\r\n        act.pair = pair || {};\r\n        if(tmp = cat.root.user){\r\n          tmp._.sea = pair;\r\n          tmp.is = {pub: pair.pub, epub: pair.epub, alias: alias};\r\n        }\r\n        // the user's public key doesn't need to be signed. But everything else needs to be signed with it! // we have now automated it! clean up these extra steps now!\r\n        act.data = {pub: pair.pub};\r\n        act.d();\r\n      }\r\n      act.d = function(){\r\n        act.data.alias = alias;\r\n        act.e();\r\n      }\r\n      act.e = function(){\r\n        act.data.epub = act.pair.epub; \r\n        SEA.encrypt({priv: act.pair.priv, epriv: act.pair.epriv}, act.proof, act.f, {raw:1}); // to keep the private key safe, we AES encrypt it with the proof of work!\r\n      }\r\n      act.f = function(auth){\r\n        act.data.auth = JSON.stringify({ek: auth, s: act.salt}); \r\n        act.g(act.data.auth);\r\n      }\r\n      act.g = function(auth){ var tmp;\r\n        act.data.auth = act.data.auth || auth;\r\n        root.get(tmp = '~'+act.pair.pub).put(act.data).on(act.h); // awesome, now we can actually save the user with their public key as their ID.\r\n        var link = {}; link[tmp] = {'#': tmp}; root.get('~@'+alias).put(link).get(tmp).on(act.i); // next up, we want to associate the alias with the public key. So we add it to the alias list.\r\n      }\r\n      act.h = function(data, key, msg, eve){\r\n        eve.off(); act.h.ok = 1; act.i();\r\n      }\r\n      act.i = function(data, key, msg, eve){\r\n        if(eve){ act.i.ok = 1; eve.off() }\r\n        if(!act.h.ok || !act.i.ok){ return }\r\n        cat.ing = false;\r\n        cb({ok: 0, pub: act.pair.pub}); // callback that the user has been created. (Note: ok = 0 because we didn't wait for disk to ack)\r\n        if(noop === cb){ pair ? gun.auth(pair) : gun.auth(alias, pass) } // if no callback is passed, auto-login after signing up.\r\n      }\r\n      root.get('~@'+alias).once(act.a);\r\n      return gun;\r\n    }\r\n    User.prototype.leave = function(opt, cb){\r\n      var gun = this, user = (gun.back(-1)._).user;\r\n      if(user){\r\n        delete user.is;\r\n        delete user._.is;\r\n        delete user._.sea;\r\n      }\r\n      if(SEA.window){\r\n        try{var sS = {};\r\n        sS = SEA.window.sessionStorage;\r\n        delete sS.recall;\r\n        delete sS.pair;\r\n        }catch(e){};\r\n      }\r\n      return gun;\r\n    }\r\n  })(USE, './create');\r\n\r\n  ;USE(function(module){\r\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN, noop = function(){};\r\n    // now that we have created a user, we want to authenticate them!\r\n    User.prototype.auth = function(...args){ // TODO: this PR with arguments need to be cleaned up / refactored.\r\n      var pair = typeof args[0] === 'object' && (args[0].pub || args[0].epub) ? args[0] : typeof args[1] === 'object' && (args[1].pub || args[1].epub) ? args[1] : null;\r\n      var alias = !pair && typeof args[0] === 'string' ? args[0] : null;\r\n      var pass = (alias || (pair && !(pair.priv && pair.epriv))) && typeof args[1] === 'string' ? args[1] : null;\r\n      var cb = args.filter(arg => typeof arg === 'function')[0] || null; // cb now can stand anywhere, after alias/pass or pair\r\n      var opt = args && args.length > 1 && typeof args[args.length-1] === 'object' ? args[args.length-1] : {}; // opt is always the last parameter which typeof === 'object' and stands after cb\r\n      \r\n      var gun = this, cat = (gun._), root = gun.back(-1);\r\n      \r\n      if(cat.ing){\r\n        (cb || noop)({err: Gun.log(\"User is already being created or authenticated!\"), wait: true});\r\n        return gun;\r\n      }\r\n      cat.ing = true;\r\n      \r\n      var act = {}, u, tries = 9;\r\n      act.a = function(data){\r\n        if(!data){ return act.b() }\r\n        if(!data.pub){\r\n          var tmp = []; Object.keys(data).forEach(function(k){ if('_'==k){ return } tmp.push(data[k]) })\r\n          return act.b(tmp);\r\n        }\r\n        if(act.name){ return act.f(data) }\r\n        act.c((act.data = data).auth);\r\n      }\r\n      act.b = function(list){\r\n        var get = (act.list = (act.list||[]).concat(list||[])).shift();\r\n        if(u === get){\r\n          if(act.name){ return act.err('Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer.') }\r\n          if(alias && tries--){\r\n            root.get('~@'+alias).once(act.a);\r\n            return;\r\n          }\r\n          return act.err('Wrong user or password.') \r\n        }\r\n        root.get(get).once(act.a);\r\n      }\r\n      act.c = function(auth){\r\n        if(u === auth){ return act.b() }\r\n        if('string' == typeof auth){ return act.c(obj_ify(auth)) } // in case of legacy\r\n        SEA.work(pass, (act.auth = auth).s, act.d, act.enc); // the proof of work is evidence that we've spent some time/effort trying to log in, this slows brute force.\r\n      }\r\n      act.d = function(proof){\r\n        SEA.decrypt(act.auth.ek, proof, act.e, act.enc);\r\n      }\r\n      act.e = function(half){\r\n        if(u === half){\r\n          if(!act.enc){ // try old format\r\n            act.enc = {encode: 'utf8'};\r\n            return act.c(act.auth);\r\n          } act.enc = null; // end backwards\r\n          return act.b();\r\n        }\r\n        act.half = half;\r\n        act.f(act.data);\r\n      }\r\n      act.f = function(pair){\r\n        var half = act.half || {}, data = act.data || {};\r\n        act.g(act.lol = {pub: pair.pub || data.pub, epub: pair.epub || data.epub, priv: pair.priv || half.priv, epriv: pair.epriv || half.epriv});\r\n      }\r\n      act.g = function(pair){\r\n        if(!pair || !pair.pub || !pair.epub){ return act.b() }\r\n        act.pair = pair;\r\n        var user = (root._).user, at = (user._);\r\n        var tmp = at.tag;\r\n        var upt = at.opt;\r\n        at = user._ = root.get('~'+pair.pub)._;\r\n        at.opt = upt;\r\n        // add our credentials in-memory only to our root user instance\r\n        user.is = {pub: pair.pub, epub: pair.epub, alias: alias || pair.pub};\r\n        at.sea = act.pair;\r\n        cat.ing = false;\r\n        try{if(pass && u == (obj_ify(cat.root.graph['~'+pair.pub].auth)||'')[':']){ opt.shuffle = opt.change = pass; } }catch(e){} // migrate UTF8 & Shuffle!\r\n        opt.change? act.z() : (cb || noop)(at);\r\n        if(SEA.window && ((gun.back('user')._).opt||opt).remember){\r\n          // TODO: this needs to be modular.\r\n          try{var sS = {};\r\n          sS = SEA.window.sessionStorage; // TODO: FIX BUG putting on `.is`!\r\n          sS.recall = true;\r\n          sS.pair = JSON.stringify(pair); // auth using pair is more reliable than alias/pass\r\n          }catch(e){}\r\n        }\r\n        try{\r\n          if(root._.tag.auth){ // auth handle might not be registered yet\r\n          (root._).on('auth', at) // TODO: Deprecate this, emit on user instead! Update docs when you do.\r\n          } else { setTimeout(function(){ (root._).on('auth', at) },1) } // if not, hackily add a timeout.\r\n          //at.on('auth', at) // Arrgh, this doesn't work without event \"merge\" code, but \"merge\" code causes stack overflow and crashes after logging in & trying to write data.\r\n        }catch(e){\r\n          Gun.log(\"Your 'auth' callback crashed with:\", e);\r\n        }\r\n      }\r\n      act.h = function(data){\r\n        if(!data){ return act.b() }\r\n        alias = data.alias\r\n        if(!alias)\r\n          alias = data.alias = \"~\" + pair.pub        \r\n        if(!data.auth){\r\n          return act.g(pair);\r\n        }\r\n        pair = null;\r\n        act.c((act.data = data).auth);\r\n      }\r\n      act.z = function(){\r\n        // password update so encrypt private key using new pwd + salt\r\n        act.salt = String.random(64); // pseudo-random\r\n        SEA.work(opt.change, act.salt, act.y);\r\n      }\r\n      act.y = function(proof){\r\n        SEA.encrypt({priv: act.pair.priv, epriv: act.pair.epriv}, proof, act.x, {raw:1});\r\n      }\r\n      act.x = function(auth){\r\n        act.w(JSON.stringify({ek: auth, s: act.salt}));\r\n      }\r\n      act.w = function(auth){\r\n        if(opt.shuffle){ // delete in future!\r\n          console.log('migrate core account from UTF8 & shuffle');\r\n          var tmp = {}; Object.keys(act.data).forEach(function(k){ tmp[k] = act.data[k] });\r\n          delete tmp._;\r\n          tmp.auth = auth;\r\n          root.get('~'+act.pair.pub).put(tmp);\r\n        } // end delete\r\n        root.get('~'+act.pair.pub).get('auth').put(auth, cb || noop);\r\n      }\r\n      act.err = function(e){\r\n        var ack = {err: Gun.log(e || 'User cannot be found!')};\r\n        cat.ing = false;\r\n        (cb || noop)(ack);\r\n      }\r\n      act.plugin = function(name){\r\n        if(!(act.name = name)){ return act.err() }\r\n        var tmp = [name];\r\n        if('~' !== name[0]){\r\n          tmp[1] = '~'+name;\r\n          tmp[2] = '~@'+name;\r\n        }\r\n        act.b(tmp);\r\n      }\r\n      if(pair){\r\n        if(pair.priv && pair.epriv)\r\n          act.g(pair);\r\n        else\r\n          root.get('~'+pair.pub).once(act.h);\r\n      } else\r\n      if(alias){\r\n        root.get('~@'+alias).once(act.a);\r\n      } else\r\n      if(!alias && !pass){\r\n        SEA.name(act.plugin);\r\n      }\r\n      return gun;\r\n    }\r\n    function obj_ify(o){\r\n      if('string' != typeof o){ return o }\r\n      try{o = JSON.parse(o);\r\n      }catch(e){o={}};\r\n      return o;\r\n    }\r\n  })(USE, './auth');\r\n\r\n  ;USE(function(module){\r\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN;\r\n    User.prototype.recall = function(opt, cb){\r\n      var gun = this, root = gun.back(-1), tmp;\r\n      opt = opt || {};\r\n      if(opt && opt.sessionStorage){\r\n        if(SEA.window){\r\n          try{\r\n            var sS = {};\r\n            sS = SEA.window.sessionStorage; // TODO: FIX BUG putting on `.is`!\r\n            if(sS){\r\n              (root._).opt.remember = true;\r\n              ((gun.back('user')._).opt||opt).remember = true;\r\n              if(sS.recall || sS.pair) root.user().auth(JSON.parse(sS.pair), cb); // pair is more reliable than alias/pass\r\n            }\r\n          }catch(e){}\r\n        }\r\n        return gun;\r\n      }\r\n      /*\r\n        TODO: copy mhelander's expiry code back in.\r\n        Although, we should check with community,\r\n        should expiry be core or a plugin?\r\n      */\r\n      return gun;\r\n    }\r\n  })(USE, './recall');\r\n\r\n  ;USE(function(module){\r\n    var User = USE('./user'), SEA = User.SEA, Gun = User.GUN, noop = function(){};\r\n    User.prototype.pair = function(){\r\n      var user = this, proxy; // undeprecated, hiding with proxies.\r\n      try{ proxy = new Proxy({DANGER:'\\u2620'}, {get: function(t,p,r){\r\n        if(!user.is || !(user._||'').sea){ return }\r\n        return user._.sea[p];\r\n      }})}catch(e){}\r\n      return proxy;\r\n    }\r\n    // If authenticated user wants to delete his/her account, let's support it!\r\n    User.prototype.delete = async function(alias, pass, cb){\r\n      console.log(\"user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!\");\r\n      var gun = this, root = gun.back(-1), user = gun.back('user');\r\n      try {\r\n        user.auth(alias, pass, function(ack){\r\n          var pub = (user.is||{}).pub;\r\n          // Delete user data\r\n          user.map().once(function(){ this.put(null) });\r\n          // Wipe user data from memory\r\n          user.leave();\r\n          (cb || noop)({ok: 0});\r\n        });\r\n      } catch (e) {\r\n        Gun.log('User.delete failed! Error:', e);\r\n      }\r\n      return gun;\r\n    }\r\n    User.prototype.alive = async function(){\r\n      console.log(\"user.alive() IS DEPRECATED!!!\");\r\n      const gunRoot = this.back(-1)\r\n      try {\r\n        // All is good. Should we do something more with actual recalled data?\r\n        await authRecall(gunRoot)\r\n        return gunRoot._.user._\r\n      } catch (e) {\r\n        const err = 'No session!'\r\n        Gun.log(err)\r\n        throw { err }\r\n      }\r\n    }\r\n    User.prototype.trust = async function(user){\r\n      console.log(\"`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!\");\r\n      // TODO: BUG!!! SEA `node` read listener needs to be async, which means core needs to be async too.\r\n      //gun.get('alice').get('age').trust(bob);\r\n      if (Gun.is(user)) {\r\n        user.get('pub').get((ctx, ev) => {\r\n          console.log(ctx, ev)\r\n        })\r\n      }\r\n      user.get('trust').get(path).put(theirPubkey);\r\n\r\n      // do a lookup on this gun chain directly (that gets bob's copy of the data)\r\n      // do a lookup on the metadata trust table for this path (that gets all the pubkeys allowed to write on this path)\r\n      // do a lookup on each of those pubKeys ON the path (to get the collab data \"layers\")\r\n      // THEN you perform Jachen's mix operation\r\n      // and return the result of that to...\r\n    }\r\n    User.prototype.grant = function(to, cb){\r\n      console.log(\"`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!\");\r\n      var gun = this, user = gun.back(-1).user(), pair = user._.sea, path = '';\r\n      gun.back(function(at){ if(at.is){ return } path += (at.get||'') });\r\n      (async function(){\r\n      var enc, sec = await user.get('grant').get(pair.pub).get(path).then();\r\n      sec = await SEA.decrypt(sec, pair);\r\n      if(!sec){\r\n        sec = SEA.random(16).toString();\r\n        enc = await SEA.encrypt(sec, pair);\r\n        user.get('grant').get(pair.pub).get(path).put(enc);\r\n      }\r\n      var pub = to.get('pub').then();\r\n      var epub = to.get('epub').then();\r\n      pub = await pub; epub = await epub;\r\n      var dh = await SEA.secret(epub, pair);\r\n      enc = await SEA.encrypt(sec, dh);\r\n      user.get('grant').get(pub).get(path).put(enc, cb);\r\n      }());\r\n      return gun;\r\n    }\r\n    User.prototype.secret = function(data, cb){\r\n      console.log(\"`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!\");\r\n      var gun = this, user = gun.back(-1).user(), pair = user.pair(), path = '';\r\n      gun.back(function(at){ if(at.is){ return } path += (at.get||'') });\r\n      (async function(){\r\n      var enc, sec = await user.get('trust').get(pair.pub).get(path).then();\r\n      sec = await SEA.decrypt(sec, pair);\r\n      if(!sec){\r\n        sec = SEA.random(16).toString();\r\n        enc = await SEA.encrypt(sec, pair);\r\n        user.get('trust').get(pair.pub).get(path).put(enc);\r\n      }\r\n      enc = await SEA.encrypt(data, sec);\r\n      gun.put(enc, cb);\r\n      }());\r\n      return gun;\r\n    }\r\n\r\n    /**\r\n     * returns the decrypted value, encrypted by secret\r\n     * @returns {Promise<any>}\r\n     // Mark needs to review 1st before officially supported\r\n    User.prototype.decrypt = function(cb) {\r\n      let gun = this,\r\n        path = ''\r\n      gun.back(function(at) {\r\n        if (at.is) {\r\n          return\r\n        }\r\n        path += at.get || ''\r\n      })\r\n      return gun\r\n        .then(async data => {\r\n          if (data == null) {\r\n            return\r\n          }\r\n          const user = gun.back(-1).user()\r\n          const pair = user.pair()\r\n          let sec = await user\r\n            .get('trust')\r\n            .get(pair.pub)\r\n            .get(path)\r\n          sec = await SEA.decrypt(sec, pair)\r\n          if (!sec) {\r\n            return data\r\n          }\r\n          let decrypted = await SEA.decrypt(data, sec)\r\n          return decrypted\r\n        })\r\n        .then(res => {\r\n          cb && cb(res)\r\n          return res\r\n        })\r\n    }\r\n    */\r\n    module.exports = User\r\n  })(USE, './share');\r\n\r\n  ;USE(function(module){\r\n    var SEA = USE('./sea'), S = USE('./settings'), noop = function() {}, u;\r\n    var Gun = (SEA.window||'').GUN || USE((''+u === typeof MODULE?'.':'')+'./gun', 1);\r\n    // After we have a GUN extension to make user registration/login easy, we then need to handle everything else.\r\n\r\n    // We do this with a GUN adapter, we first listen to when a gun instance is created (and when its options change)\r\n    Gun.on('opt', function(at){\r\n      if(!at.sea){ // only add SEA once per instance, on the \"at\" context.\r\n        at.sea = {own: {}};\r\n        at.on('put', check, at); // SEA now runs its firewall on HAM diffs, not all i/o.\r\n      }\r\n      this.to.next(at); // make sure to call the \"next\" middleware adapter.\r\n    });\r\n\r\n    // Alright, this next adapter gets run at the per node level in the graph database.\r\n    // correction: 2020 it gets run on each key/value pair in a node upon a HAM diff.\r\n    // This will let us verify that every property on a node has a value signed by a public key we trust.\r\n    // If the signature does not match, the data is just `undefined` so it doesn't get passed on.\r\n    // If it does match, then we transform the in-memory \"view\" of the data into its plain value (without the signature).\r\n    // Now NOTE! Some data is \"system\" data, not user data. Example: List of public keys, aliases, etc.\r\n    // This data is self-enforced (the value can only match its ID), but that is handled in the `security` function.\r\n    // From the self-enforced data, we can see all the edges in the graph that belong to a public key.\r\n    // Example: ~ASDF is the ID of a node with ASDF as its public key, signed alias and salt, and\r\n    // its encrypted private key, but it might also have other signed values on it like `profile = <ID>` edge.\r\n    // Using that directed edge's ID, we can then track (in memory) which IDs belong to which keys.\r\n    // Here is a problem: Multiple public keys can \"claim\" any node's ID, so this is dangerous!\r\n    // This means we should ONLY trust our \"friends\" (our key ring) public keys, not any ones.\r\n    // I have not yet added that to SEA yet in this alpha release. That is coming soon, but beware in the meanwhile!\r\n\r\n    function check(msg){ // REVISE / IMPROVE, NO NEED TO PASS MSG/EVE EACH SUB?\r\n      var eve = this, at = eve.as, put = msg.put, soul = put['#'], key = put['.'], val = put[':'], state = put['>'], id = msg['#'], tmp;\r\n      if(!soul || !key){ return }\r\n      if((msg._||'').faith && (at.opt||'').faith && 'function' == typeof msg._){\r\n        SEA.opt.pack(put, function(raw){\r\n        SEA.verify(raw, false, function(data){ // this is synchronous if false\r\n          put['='] = SEA.opt.unpack(data);\r\n          eve.to.next(msg);\r\n        })})\r\n        return \r\n      }\r\n      var no = function(why){ at.on('in', {'@': id, err: msg.err = why}) }; // exploit internal relay stun for now, maybe violates spec, but testing for now. // Note: this may be only the sharded message, not original batch.\r\n      //var no = function(why){ msg.ack(why) };\r\n      (msg._||'').DBG && ((msg._||'').DBG.c = +new Date);\r\n      if(0 <= soul.indexOf('<?')){ // special case for \"do not sync data X old\" forget\r\n        // 'a~pub.key/b<?9'\r\n        tmp = parseFloat(soul.split('<?')[1]||'');\r\n        if(tmp && (state < (Gun.state() - (tmp * 1000)))){ // sec to ms\r\n          (tmp = msg._) && (tmp.stun) && (tmp.stun--); // THIS IS BAD CODE! It assumes GUN internals do something that will probably change in future, but hacking in now.\r\n          return; // omit!\r\n        }\r\n      }\r\n      \r\n      if('~@' === soul){  // special case for shared system data, the list of aliases.\r\n        check.alias(eve, msg, val, key, soul, at, no); return;\r\n      }\r\n      if('~@' === soul.slice(0,2)){ // special case for shared system data, the list of public keys for an alias.\r\n        check.pubs(eve, msg, val, key, soul, at, no); return;\r\n      }\r\n      //if('~' === soul.slice(0,1) && 2 === (tmp = soul.slice(1)).split('.').length){ // special case, account data for a public key.\r\n      if(tmp = SEA.opt.pub(soul)){ // special case, account data for a public key.\r\n        check.pub(eve, msg, val, key, soul, at, no, at.user||'', tmp); return;\r\n      }\r\n      if(0 <= soul.indexOf('#')){ // special case for content addressing immutable hashed data.\r\n        check.hash(eve, msg, val, key, soul, at, no); return;\r\n      } \r\n      check.any(eve, msg, val, key, soul, at, no, at.user||''); return;\r\n      eve.to.next(msg); // not handled\r\n    }\r\n    check.hash = function(eve, msg, val, key, soul, at, no){ // mark unbuilt @i001962 's epic hex contrib!\r\n      SEA.work(val, null, function(data){\r\n        function hexToBase64(hexStr) {\r\n          let base64 = \"\";\r\n          for(let i = 0; i < hexStr.length; i++) {\r\n            base64 += !(i - 1 & 1) ? String.fromCharCode(parseInt(hexStr.substring(i - 1, i + 1), 16)) : \"\"}\r\n          return btoa(base64);}  \r\n        if(data && data === key.split('#').slice(-1)[0]){ return eve.to.next(msg) }\r\n          else if (data && data === hexToBase64(key.split('#').slice(-1)[0])){ \r\n          return eve.to.next(msg) }\r\n        no(\"Data hash not same as hash!\");\r\n      }, {name: 'SHA-256'});\r\n    }\r\n    check.alias = function(eve, msg, val, key, soul, at, no){ // Example: {_:#~@, ~@alice: {#~@alice}}\r\n      if(!val){ return no(\"Data must exist!\") } // data MUST exist\r\n      if('~@'+key === link_is(val)){ return eve.to.next(msg) } // in fact, it must be EXACTLY equal to itself\r\n      no(\"Alias not same!\"); // if it isn't, reject.\r\n    };\r\n    check.pubs = function(eve, msg, val, key, soul, at, no){ // Example: {_:#~@alice, ~asdf: {#~asdf}}\r\n      if(!val){ return no(\"Alias must exist!\") } // data MUST exist\r\n      if(key === link_is(val)){ return eve.to.next(msg) } // and the ID must be EXACTLY equal to its property\r\n      no(\"Alias not same!\"); // that way nobody can tamper with the list of public keys.\r\n    };\r\n    check.pub = async function(eve, msg, val, key, soul, at, no, user, pub){ var tmp // Example: {_:#~asdf, hello:'world'~fdsa}}\r\n      const raw = await S.parse(val) || {}\r\n      const verify = (certificate, certificant, cb) => {\r\n        if (certificate.m && certificate.s && certificant && pub)\r\n          // now verify certificate\r\n          return SEA.verify(certificate, pub, data => { // check if \"pub\" (of the graph owner) really issued this cert\r\n            if (u !== data && u !== data.e && msg.put['>'] && msg.put['>'] > parseFloat(data.e)) return no(\"Certificate expired.\") // certificate expired\r\n            // \"data.c\" = a list of certificants/certified users\r\n            // \"data.w\" = lex WRITE permission, in the future, there will be \"data.r\" which means lex READ permission\r\n            if (u !== data && data.c && data.w && (data.c === certificant || data.c.indexOf('*' || certificant) > -1)) {\r\n              // ok, now \"certificant\" is in the \"certificants\" list, but is \"path\" allowed? Check path\r\n              let path = soul.indexOf('/') > -1 ? soul.replace(soul.substring(0, soul.indexOf('/') + 1), '') : ''\r\n              String.match = String.match || Gun.text.match\r\n              const w = Array.isArray(data.w) ? data.w : typeof data.w === 'object' || typeof data.w === 'string' ? [data.w] : []\r\n              for (const lex of w) {\r\n                if ((String.match(path, lex['#']) && String.match(key, lex['.'])) || (!lex['.'] && String.match(path, lex['#'])) || (!lex['#'] && String.match(key, lex['.'])) || String.match((path ? path + '/' + key : key), lex['#'] || lex)) {\r\n                  // is Certificant forced to present in Path\r\n                  if (lex['+'] && lex['+'].indexOf('*') > -1 && path && path.indexOf(certificant) == -1 && key.indexOf(certificant) == -1) return no(`Path \"${path}\" or key \"${key}\" must contain string \"${certificant}\".`)\r\n                  // path is allowed, but is there any WRITE block? Check it out\r\n                  if (data.wb && (typeof data.wb === 'string' || ((data.wb || {})['#']))) { // \"data.wb\" = path to the WRITE block\r\n                    var root = eve.as.root.$.back(-1)\r\n                    if (typeof data.wb === 'string' && '~' !== data.wb.slice(0, 1)) root = root.get('~' + pub)\r\n                    return root.get(data.wb).get(certificant).once(value => { // TODO: INTENT TO DEPRECATE.\r\n                      if (value && (value === 1 || value === true)) return no(`Certificant ${certificant} blocked.`)\r\n                      return cb(data)\r\n                    })\r\n                  }\r\n                  return cb(data)\r\n                }\r\n              }\r\n              return no(\"Certificate verification fail.\")\r\n            }\r\n          })\r\n        return\r\n      }\r\n      \r\n      if ('pub' === key && '~' + pub === soul) {\r\n        if (val === pub) return eve.to.next(msg) // the account MUST match `pub` property that equals the ID of the public key.\r\n        return no(\"Account not same!\")\r\n      }\r\n\r\n      if ((tmp = user.is) && tmp.pub && !raw['*'] && !raw['+'] && (pub === tmp.pub || (pub !== tmp.pub && ((msg._.msg || {}).opt || {}).cert))){\r\n        SEA.opt.pack(msg.put, packed => {\r\n          SEA.sign(packed, (user._).sea, async function(data) {\r\n            if (u === data) return no(SEA.err || 'Signature fail.')\r\n            msg.put[':'] = {':': tmp = SEA.opt.unpack(data.m), '~': data.s}\r\n            msg.put['='] = tmp\r\n  \r\n            // if writing to own graph, just allow it\r\n            if (pub === user.is.pub) {\r\n              if (tmp = link_is(val)) (at.sea.own[tmp] = at.sea.own[tmp] || {})[pub] = 1\r\n              JSON.stringifyAsync(msg.put[':'], function(err,s){\r\n                if(err){ return no(err || \"Stringify error.\") }\r\n                msg.put[':'] = s;\r\n                return eve.to.next(msg);\r\n              })\r\n              return\r\n            }\r\n  \r\n            // if writing to other's graph, check if cert exists then try to inject cert into put, also inject self pub so that everyone can verify the put\r\n            if (pub !== user.is.pub && ((msg._.msg || {}).opt || {}).cert) {\r\n              const cert = await S.parse(msg._.msg.opt.cert)\r\n              // even if cert exists, we must verify it\r\n              if (cert && cert.m && cert.s)\r\n                verify(cert, user.is.pub, _ => {\r\n                  msg.put[':']['+'] = cert // '+' is a certificate\r\n                  msg.put[':']['*'] = user.is.pub // '*' is pub of the user who puts\r\n                  JSON.stringifyAsync(msg.put[':'], function(err,s){\r\n                    if(err){ return no(err || \"Stringify error.\") }\r\n                    msg.put[':'] = s;\r\n                    return eve.to.next(msg);\r\n                  })\r\n                  return\r\n                })\r\n            }\r\n          }, {raw: 1})\r\n        })\r\n        return;\r\n      }\r\n\r\n      SEA.opt.pack(msg.put, packed => {\r\n        SEA.verify(packed, raw['*'] || pub, function(data){ var tmp;\r\n          data = SEA.opt.unpack(data);\r\n          if (u === data) return no(\"Unverified data.\") // make sure the signature matches the account it claims to be on. // reject any updates that are signed with a mismatched account.\r\n          if ((tmp = link_is(data)) && pub === SEA.opt.pub(tmp)) (at.sea.own[tmp] = at.sea.own[tmp] || {})[pub] = 1\r\n          \r\n          // check if cert ('+') and putter's pub ('*') exist\r\n          if (raw['+'] && raw['+']['m'] && raw['+']['s'] && raw['*'])\r\n            // now verify certificate\r\n            verify(raw['+'], raw['*'], _ => {\r\n              msg.put['='] = data;\r\n              return eve.to.next(msg);\r\n            })\r\n          else {\r\n            msg.put['='] = data;\r\n            return eve.to.next(msg);\r\n          }\r\n        });\r\n      })\r\n      return\r\n    };\r\n    check.any = function(eve, msg, val, key, soul, at, no, user){ var tmp, pub;\r\n      if(at.opt.secure){ return no(\"Soul missing public key at '\" + key + \"'.\") }\r\n      // TODO: Ask community if should auto-sign non user-graph data.\r\n      at.on('secure', function(msg){ this.off();\r\n        if(!at.opt.secure){ return eve.to.next(msg) }\r\n        no(\"Data cannot be changed.\");\r\n      }).on.on('secure', msg);\r\n      return;\r\n    }\r\n\r\n    var valid = Gun.valid, link_is = function(d,l){ return 'string' == typeof (l = valid(d)) && l }, state_ify = (Gun.state||'').ify;\r\n\r\n    var pubcut = /[^\\w_-]/; // anything not alphanumeric or _ -\r\n    SEA.opt.pub = function(s){\r\n      if(!s){ return }\r\n      s = s.split('~');\r\n      if(!s || !(s = s[1])){ return }\r\n      s = s.split(pubcut).slice(0,2);\r\n      if(!s || 2 != s.length){ return }\r\n      if('@' === (s[0]||'')[0]){ return }\r\n      s = s.slice(0,2).join('.');\r\n      return s;\r\n    }\r\n    SEA.opt.stringy = function(t){\r\n      // TODO: encrypt etc. need to check string primitive. Make as breaking change.\r\n    }\r\n    SEA.opt.pack = function(d,cb,k, n,s){ var tmp, f; // pack for verifying\r\n      if(SEA.opt.check(d)){ return cb(d) }\r\n      if(d && d['#'] && d['.'] && d['>']){ tmp = d[':']; f = 1 }\r\n      JSON.parseAsync(f? tmp : d, function(err, meta){\r\n        var sig = ((u !== (meta||'')[':']) && (meta||'')['~']); // or just ~ check?\r\n        if(!sig){ cb(d); return }\r\n        cb({m: {'#':s||d['#'],'.':k||d['.'],':':(meta||'')[':'],'>':d['>']||Gun.state.is(n, k)}, s: sig});\r\n      });\r\n    }\r\n    var O = SEA.opt;\r\n    SEA.opt.unpack = function(d, k, n){ var tmp;\r\n      if(u === d){ return }\r\n      if(d && (u !== (tmp = d[':']))){ return tmp }\r\n      k = k || O.fall_key; if(!n && O.fall_val){ n = {}; n[k] = O.fall_val }\r\n      if(!k || !n){ return }\r\n      if(d === n[k]){ return d }\r\n      if(!SEA.opt.check(n[k])){ return d }\r\n      var soul = (n && n._ && n._['#']) || O.fall_soul, s = Gun.state.is(n, k) || O.fall_state;\r\n      if(d && 4 === d.length && soul === d[0] && k === d[1] && fl(s) === fl(d[3])){\r\n        return d[2];\r\n      }\r\n      if(s < SEA.opt.shuffle_attack){\r\n        return d;\r\n      }\r\n    }\r\n    SEA.opt.shuffle_attack = 1546329600000; // Jan 1, 2019\r\n    var fl = Math.floor; // TODO: Still need to fix inconsistent state issue.\r\n    // TODO: Potential bug? If pub/priv key starts with `-`? IDK how possible.\r\n\r\n  })(USE, './index');\r\n}());\r\n"],
  "mappings": "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",
  "names": ["path", "module", "length", "buf", "u", "sha1hash", "e", "data", "pub", "pair", "tmp", "msg"]
}
